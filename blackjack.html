<!DOCTYPE html>
<html>
<head>
    <title>Blackjack</title>
    <script src = "main.js"></script>
</head>
<body>
    <h1>Blackjack</h1>
    <button id="deal-button">Deal</button>
    <button id="hit-button">Hit</button>
    <button id="stand-button">Stand</button>
    <div id="player-hand">Player: </div>
    <div id="dealer-hand">Dealer: </div>
    <div id="message">Welcome to Blackjack!</div>

    <script>
        // Define the deck of cards
        const ranks = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K", "A"];
        const suits = ["Hearts", "Diamonds", "Clubs", "Spades"];
        let deck = [];

        // Create the deck
        for (const suit of suits) {
            for (const rank of ranks) {
                deck.push(rank + " of " + suit);
            }
        }

        // Shuffle the deck
        function shuffleDeck(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
        }

        // Deal a card from the deck
        function dealCard() {
            return deck.pop();
        }

        // Initialize the game
        function initializeGame() {
            shuffleDeck(deck);

            playerHand = [dealCard(), dealCard()];
            dealerHand = [dealCard(), dealCard()];

            document.getElementById("deal-button").disabled = true;
            document.getElementById("hit-button").disabled = false;
            document.getElementById("stand-button").disabled = false;

            updateHands();
        }

        // Update the displayed hands
        function updateHands() {
            document.getElementById("player-hand").textContent = "Player: " + playerHand.join(", ");
            document.getElementById("dealer-hand").textContent = "Dealer: " + dealerHand[0] + ", *";
        }

        // Calculate the value of a hand
        function calculateHandValue(hand) {
            let value = 0;
            let hasAce = false;

            for (const card of hand) {
                const rank = card.split(" ")[0];
                if (rank === "A") {
                    hasAce = true;
                    value += 11;
                } else if (["K", "Q", "J"].includes(rank)) {
                    value += 10;
                } else {
                    value += parseInt(rank);
                }
            }

            if (hasAce && value > 21) {
                value -= 10; // Change the value of the Ace from 11 to 1
            }

            return value;
        }

        // Check if the game is over
        function checkGameOver() {
            if (calculateHandValue(playerHand) === 21) {
                document.getElementById("message").textContent = "Player wins with Blackjack!";
                endGame();
            } else if (calculateHandValue(playerHand) > 21) {
                document.getElementById("message").textContent = "Player busts! Dealer wins.";
                endGame();
            }
        }

        // End the game and reveal the dealer's hand
        function endGame() {
            document.getElementById("deal-button").disabled = false;
            document.getElementById("hit-button").disabled = true;
            document.getElementById("stand-button").disabled = true;

            document.getElementById("dealer-hand").textContent = "Dealer: " + dealerHand.join(", ");
            while (calculateHandValue(dealerHand) < 17) {
                dealerHand.push(dealCard());
                document.getElementById("dealer-hand").textContent = "Dealer: " + dealerHand.join(", ");
            }

            if (calculateHandValue(dealerHand) > 21) {
                document.getElementById("message").textContent = "Dealer busts! Player wins!";
            } else if (calculateHandValue(dealerHand) === calculateHandValue(playerHand)) {
                document.getElementById("message").textContent = "It's a push!";
            } else if (calculateHandValue(playerHand) > calculateHandValue(dealerHand)) {
                document.getElementById("message").textContent = "Player wins!";
            } else {
                document.getElementById("message").textContent = "Dealer wins!";
            }
        }

        // Event handlers
        document.getElementById("deal-button").addEventListener("click", initializeGame);
        document.getElementById("hit-button").addEventListener("click", function () {
            playerHand.push(dealCard());
            updateHands();
            checkGameOver();
        });
        document.getElementById("stand-button").addEventListener("click", endGame);

        initializeGame(); // Start the game
    </script>
</body>
</html>
